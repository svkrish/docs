(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{m687:function(A,e,t){"use strict";t.r(e),t.d(e,"_frontmatter",(function(){return n})),t.d(e,"default",(function(){return h}));t("91GP"),t("rGqo"),t("yt8O"),t("Btvt"),t("RW0V"),t("q1tI");var a=t("7ljp"),i=t("013z");t("qKvR");function r(){return(r=Object.assign||function(A){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(A[a]=t[a])}return A}).apply(this,arguments)}var n={},o=function(A){return function(e){return console.warn("Component "+A+" was not imported, exported, or provided by MDXProvider as global scope"),Object(a.b)("div",e)}},l=o("Tabs"),c=o("Tab"),s=o("Row"),b=o("Column"),p=o("ImageCard"),d={_frontmatter:n},g=i.a;function h(A){var e=A.components,t=function(A,e){if(null==A)return{};var t,a,i={},r=Object.keys(A);for(a=0;a<r.length;a++)t=r[a],e.indexOf(t)>=0||(i[t]=A[t]);return i}(A,["components"]);return Object(a.b)(g,r({},d,t,{components:e,mdxType:"MDXLayout"}),Object(a.b)("h2",null,"Introduction"),Object(a.b)("p",null,"This project demonstrates how to authenticate the API user as well as to enable OAuth 2.0 authorization for all OAuth protected APIs in the Storefront application. The Spring Authorization Server is used as an OAuth provider; the Storefront application delegates authentication and authorization to this component, which verifies credentials using the Auth Microservice."),Object(a.b)("h2",null,"Architecture"),Object(a.b)("h3",null,"Interaction with Identity Provider (Auth Microservice)"),Object(a.b)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"827px"}},"\n      ",Object(a.b)("span",r({parentName:"span"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"20.13888888888889%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsSAAALEgHS3X78AAAA/ElEQVQY02WLS0rDYACEc4VexBt4Em/hRsG1CO7cuRUERVyqXWhFtPigiBGNoRqTJhH+/k1M0zTm0TT5bONGdOBjGGZGaZ532N454tP3EUJgGEaN6zhE45Sw30E8rBD5Gp4fousvqKqKbfcYx/msv6OvrpKPuhRFhXJ4fMvC4hK7ewf0pcSyLEzTnB0shIwItDW8VoPY2iJOwXEsXNdFSkGSgVSX8c4atFsb6G6MMgqHXFxe0X3v8VfTEgJxj3xaJ/ReKaa/yqqkrCALnxlom+w3Tzm51lDSNCWKIpLk62dXVTVz5XnGwBviBXMPmEzyf5s3w6Z984jtfNT5G5k6IiSe/50SAAAAAElFTkSuQmCC')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(a.b)("img",r({parentName:"span"},{className:"gatsby-resp-image-image",alt:"Auth Architecture",title:"Auth Architecture",src:"/static/7a87382c6d4df0af71f190da5ba8177e/d2ce3/auth.png",srcSet:["/static/7a87382c6d4df0af71f190da5ba8177e/7fc1e/auth.png 288w","/static/7a87382c6d4df0af71f190da5ba8177e/a5df1/auth.png 576w","/static/7a87382c6d4df0af71f190da5ba8177e/d2ce3/auth.png 827w"],sizes:"(max-width: 827px) 100vw, 827px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n    "),Object(a.b)("h3",null,"Interaction with Resource Server API"),Object(a.b)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"752px"}},"\n      ",Object(a.b)("span",r({parentName:"span"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"48.26388888888889%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAAB6klEQVQoz4VSPW/UQBD1D0IUQAUtRcQfgBKJkpKCio6Kih4KEAXQECQUgYiUwBWXU8SRI8rd5eKP4y5YF9vr8/rbsb1+7I516FCQeNLIuzM7b96MRxN1hTRNkSQJ4jgG5xxBECAMQ/KT5UCSlUjlmzzPybIsoxwVS7MKURRSvtYfTGRQeiVs24au6xiNRrAsS5JGEKLBOduGyE3UAvB9hvl8Jgkiyin9HdTJmM4qpl3beIAXr96SQ1VQ1Vu1HGFcwx4+x9nXy/B6GwgDVxb6ifF4iFPbh2u8gdO5Aqd7Ezx04XlLaPfuP8Sjx0+wcBm1sWqZ86VsswGbvseyexXh4V2IusQKjRLgfEHev47e1m08fb2Nnb0DaGpGPGzlq7PneUTIGENR5KhqYG5+B3PtlqhpyBTUXPXhLva/ddEZmDg2ptCCZUCzq+saZVnSt7WKkoIgwvGPT5hZR9LX/CFVYMzDiT7FbDaXNwEuhWhUKUlJlWEYmEwmZI6zQCnVJYuP8PdugA/uIEmTCyrX4bpuS6haXV8HZeeFXIsMOJu8RNy7hM67W3i2uQvzl0vJ6u+viIUQ5FPj0vAfKB2O+QGHRz183j/BggV/qVxX6/s+tKqq/vlAKVBwHAf9gzF0wyLlpK5pLrReFAXt5m8MlOtLeHADJAAAAABJRU5ErkJggg==')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(a.b)("img",r({parentName:"span"},{className:"gatsby-resp-image-image",alt:"Resource Server",title:"Resource Server",src:"/static/f6a58292a59ff1464c6b8a50a835d7e5/cb78d/auth_orders.png",srcSet:["/static/f6a58292a59ff1464c6b8a50a835d7e5/7fc1e/auth_orders.png 288w","/static/f6a58292a59ff1464c6b8a50a835d7e5/a5df1/auth_orders.png 576w","/static/f6a58292a59ff1464c6b8a50a835d7e5/cb78d/auth_orders.png 752w"],sizes:"(max-width: 752px) 100vw, 752px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n    "),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"When a client wishes to acquire an OAuth token to call a protected API, it calls the OAuth Provider (Authorization microservice) token endpoint with the ",Object(a.b)("inlineCode",{parentName:"li"},"username/password")," of the user and requests a token with scope ",Object(a.b)("inlineCode",{parentName:"li"},"blue"),"."),Object(a.b)("li",{parentName:"ul"},"Authorization microservice will call the Customer microservice to get the credentials and perform the validation."),Object(a.b)("li",{parentName:"ul"},"If the ",Object(a.b)("inlineCode",{parentName:"li"},"username/password")," are valid, ",Object(a.b)("inlineCode",{parentName:"li"},"HTTP 200")," is returned, along with a JWT (signed using a HS256 shared secret) in the JSON response under ",Object(a.b)("inlineCode",{parentName:"li"},"access_token")," which contains the auth ID of the user passed in the ",Object(a.b)("inlineCode",{parentName:"li"},"user_name")," claim."),Object(a.b)("li",{parentName:"ul"},"The client uses the JWT in the ",Object(a.b)("inlineCode",{parentName:"li"},"Authorization")," header as a bearer token to call other Resource Servers that have OAuth protected API (such as the Orders microservice)."),Object(a.b)("li",{parentName:"ul"},"The service implementing the REST API verifies that the JWT is valid and signed using the shared secret, then extracts the ",Object(a.b)("inlineCode",{parentName:"li"},"user_name")," claim from the JWT to identify the caller."),Object(a.b)("li",{parentName:"ul"},"The JWT is encoded with scope ",Object(a.b)("inlineCode",{parentName:"li"},"blue")," and the the expiry time in ",Object(a.b)("inlineCode",{parentName:"li"},"exp"),"; once the token is generated, there is no additional interaction between the Resource Server and the OAuth server.")),Object(a.b)("h2",null,"APIs"),Object(a.b)("table",null,Object(a.b)("thead",{parentName:"table"},Object(a.b)("tr",{parentName:"thead"},Object(a.b)("th",r({parentName:"tr"},{align:null}),"APIs"),Object(a.b)("th",r({parentName:"tr"},{align:null}),"Function"))),Object(a.b)("tbody",{parentName:"table"},Object(a.b)("tr",{parentName:"tbody"},Object(a.b)("td",r({parentName:"tr"},{align:null}),Object(a.b)("inlineCode",{parentName:"td"},"/oauth/authorize")),Object(a.b)("td",r({parentName:"tr"},{align:null}),"Get authorization token")),Object(a.b)("tr",{parentName:"tbody"},Object(a.b)("td",r({parentName:"tr"},{align:null}),Object(a.b)("inlineCode",{parentName:"td"},"/oauth/token")),Object(a.b)("td",r({parentName:"tr"},{align:null}),"post authorization token")))),Object(a.b)("h2",null,"Frameworks"),Object(a.b)(l,{mdxType:"Tabs"},Object(a.b)(c,{label:"SpringBoot",mdxType:"Tab"},Object(a.b)("p",null,Object(a.b)("a",r({parentName:"p"},{href:"https://github.com/ibm-garage-ref-storefront/auth-ms-spring/"}),"Auth Github Repo")),Object(a.b)("h3",null,"Project Features"),Object(a.b)("br",null),Object(a.b)("br",null),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"Leverage ",Object(a.b)("a",r({parentName:"li"},{href:"https://projects.spring.io/spring-boot/"}),"Spring Boot")," framework to build a Microservices application."),Object(a.b)("li",{parentName:"ul"},"Uses ",Object(a.b)("a",r({parentName:"li"},{href:"https://spring.io/projects/spring-security-oauth"}),"Spring Security OAuth"),"."),Object(a.b)("li",{parentName:"ul"},"Return a signed ",Object(a.b)("a",r({parentName:"li"},{href:"https://jwt.io/"}),"JWT")," Bearer token back to caller for identity propagation and authorization"),Object(a.b)("li",{parentName:"ul"},"Uses ",Object(a.b)("a",r({parentName:"li"},{href:"https://docs.docker.com/"}),"Docker")," to package application binary and its dependencies.")),Object(a.b)("br",null),Object(a.b)("br",null),Object(a.b)(s,{mdxType:"Row"},Object(a.b)(b,{colMd:3,colLg:4,noGutterSm:!0,mdxType:"Column"},Object(a.b)(p,{title:"Deploy the app locally",titleColor:"light",aspectRatio:"1:1",href:"https://github.com/ibm-garage-ref-storefront/auth-ms-spring/blob/master/README.md",actionIcon:"arrowRight",subTitleColor:"light",subTitle:"Appsody",mdxType:"ImageCard"},Object(a.b)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}},"\n      ",Object(a.b)("span",r({parentName:"span"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"56.59722222222222%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAIEBf/EABYBAQEBAAAAAAAAAAAAAAAAAAIAA//aAAwDAQACEAMQAAABWlZ53PS//8QAGRABAQEBAQEAAAAAAAAAAAAAAQIDABIi/9oACAEBAAEFAvP1ZJzvQ12yzhSr/8QAFhEBAQEAAAAAAAAAAAAAAAAAAAER/9oACAEDAQE/AYx//8QAFhEBAQEAAAAAAAAAAAAAAAAAAAER/9oACAECAQE/Aa2P/8QAGxAAAgEFAAAAAAAAAAAAAAAAAAExAhBBcZH/2gAIAQEABj8CTgW8EU8EJq3/xAAZEAEBAQEBAQAAAAAAAAAAAAABEQAhMYH/2gAIAQEAAT8hmx6PcxMSOruSA5c7+LlNi5Sr3f/aAAwDAQACAAMAAAAQ3A//xAAWEQEBAQAAAAAAAAAAAAAAAAAAAVH/2gAIAQMBAT8Q2lP/xAAXEQEAAwAAAAAAAAAAAAAAAAAAATFR/9oACAECAQE/ELJwf//EAB0QAQEAAQQDAAAAAAAAAAAAAAERACExQVFhceH/2gAIAQEAAT8QdCiluzzOsOLa2tPZt8cHKED7eMOgrCJeaa5ZJiob4h9S5//Z')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(a.b)("img",r({parentName:"span"},{className:"gatsby-resp-image-image",alt:"Light dark",title:"Light dark",src:"/static/f279444ed74a822d768cc7b76191de8a/2e753/local_run.jpg",srcSet:["/static/f279444ed74a822d768cc7b76191de8a/69549/local_run.jpg 288w","/static/f279444ed74a822d768cc7b76191de8a/473e3/local_run.jpg 576w","/static/f279444ed74a822d768cc7b76191de8a/2e753/local_run.jpg 1152w","/static/f279444ed74a822d768cc7b76191de8a/74f4b/local_run.jpg 1728w","/static/f279444ed74a822d768cc7b76191de8a/de5bb/local_run.jpg 2304w","/static/f279444ed74a822d768cc7b76191de8a/cc621/local_run.jpg 5712w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n    "))),Object(a.b)(b,{colMd:3,colLg:4,noGutterSm:!0,mdxType:"Column"},Object(a.b)(p,{title:"Deploy the app to Openshift 4.3",titleColor:"light",aspectRatio:"1:1",href:"/",actionIcon:"arrowRight",subTitleColor:"light",subTitle:"Appsody",mdxType:"ImageCard"},Object(a.b)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"600px"}},"\n      ",Object(a.b)("span",r({parentName:"span"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"56.59722222222222%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAECAwQF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB4rsziIh//8QAGRAAAQUAAAAAAAAAAAAAAAAAAQAQIUFD/9oACAEBAAEFAqghZlv/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAXEAADAQAAAAAAAAAAAAAAAAAAESAy/9oACAEBAAY/AjSn/8QAGhAAAgMBAQAAAAAAAAAAAAAAAREAIUEQUf/aAAgBAQABPyE6tOLYeERi7i7/AP/aAAwDAQACAAMAAAAQs8//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAbEAADAAIDAAAAAAAAAAAAAAAAARExYSGB8P/aAAgBAQABPxBIqOjKdCf1PAyQewiONmDHk//Z')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(a.b)("img",r({parentName:"span"},{className:"gatsby-resp-image-image",alt:"Light dark",title:"Light dark",src:"/static/cdb2baf9353d923691970e11ccfa6806/f6133/redhat_openshift.jpg",srcSet:["/static/cdb2baf9353d923691970e11ccfa6806/69549/redhat_openshift.jpg 288w","/static/cdb2baf9353d923691970e11ccfa6806/473e3/redhat_openshift.jpg 576w","/static/cdb2baf9353d923691970e11ccfa6806/f6133/redhat_openshift.jpg 600w"],sizes:"(max-width: 600px) 100vw, 600px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n    "))),Object(a.b)(b,{colMd:3,colLg:4,noGutterSm:!0,mdxType:"Column"},Object(a.b)(p,{title:"Deploy the app using CP4Apps",titleColor:"light",aspectRatio:"1:1",href:"/",actionIcon:"arrowRight",subTitleColor:"light",subTitle:"CP4Apps",mdxType:"ImageCard"},Object(a.b)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"445px"}},"\n      ",Object(a.b)("span",r({parentName:"span"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"71.875%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMEBf/EABUBAQEAAAAAAAAAAAAAAAAAAAID/9oADAMBAAIQAxAAAAHHpmcpoANP/8QAGBAAAwEBAAAAAAAAAAAAAAAAAAECAxD/2gAIAQEAAQUCKzSnlaNo/8QAFxEAAwEAAAAAAAAAAAAAAAAAAQIREP/aAAgBAwEBPwFg1Ez/xAAXEQADAQAAAAAAAAAAAAAAAAACEBFB/9oACAECAQE/ARmr/8QAFhAAAwAAAAAAAAAAAAAAAAAAEBEg/9oACAEBAAY/AoQ//8QAGBABAAMBAAAAAAAAAAAAAAAAAQAQESH/2gAIAQEAAT8hDUJsjdo4zgxX/9oADAMBAAIAAwAAABCLz//EABYRAQEBAAAAAAAAAAAAAAAAAEEBEP/aAAgBAwEBPxCwLn//xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAgEBPxBEY//EABwQAQABBQEBAAAAAAAAAAAAAAERABAhQVExgf/aAAgBAQABPxD2TLGCaKpBt38soGBjpQJB2Lf/2Q==')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(a.b)("img",r({parentName:"span"},{className:"gatsby-resp-image-image",alt:"Light dark",title:"Light dark",src:"/static/8f3c4279a52c34780b26f354b809a401/ea62e/cloud-pak-for-applications.jpg",srcSet:["/static/8f3c4279a52c34780b26f354b809a401/69549/cloud-pak-for-applications.jpg 288w","/static/8f3c4279a52c34780b26f354b809a401/ea62e/cloud-pak-for-applications.jpg 445w"],sizes:"(max-width: 445px) 100vw, 445px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n    "))))),Object(a.b)(c,{label:"OpenLiberty",mdxType:"Tab"},Object(a.b)("p",null,"TBD")),Object(a.b)(c,{label:"Quarkus",mdxType:"Tab"},Object(a.b)("p",null,"TBD"))))}h.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-related-repositories-auth-mdx-42a9f7913a0fbe9d0ef3.js.map